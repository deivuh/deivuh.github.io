
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Finally, no more double NAT from my ISP - David Hsieh</title>
  <meta name="author" content="David Hsieh">


<meta name="description" content="A few years ago, after struggling with BitTorrent clients and online game servers closed port warning and error messages, I’ve been learning about &hellip;">



  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://davidhsiehlo.com/blog/2013/12/20/finally">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="David Hsieh" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-28834638-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">David Hsieh</a></h1>
  
    <h2>Thoughts and notes about CS, tech and life</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:davidhsiehlo.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Finally, No More Double NAT From My ISP</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-20T23:05:52-06:00" pubdate data-updated="true">Dec 20<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>A few years ago, after struggling with BitTorrent clients and online game servers closed port warning and error messages, I’ve been learning about DSL routing and computer networks. That’s when I realised that I would never be able to have an open port or a public IP address to my home network, because my network was behind an ATM Bridge.</p>

<p>Having helped to setup some home networks to some family members, I ran some tests and apparently their DSL router had an actual dynamic public IP address, and were able to have open ports. PPPoE was the type of connection it showed after checking their DSL routers, and they actually had the same ISP. My deduction was that old internet users got stuck with IPoATM connections, and new users had PPPoE connections; it made sense, because when my home’s internet service was acquired, a technician was required to make the router configuration and installation, while new users just had to plug and play their line filters and DSL routers. Until few months ago my solution was to <a href="http://davidhsiehlo.com/blog/2013/12/15/bypassing-a-nat-slash-firewall-by-reverse-ssh-tunneling/">setup a SSH reverse tunnel to access my home network</a>, but with this, I don&rsquo;t need to anymore.</p>

<p>Last week after noticing my internet connection was gone, I called to my ISP tech support, and it went like this:</p>

<!-- more -->


<blockquote><p><strong>Tech support guy:</strong> Hello […] how can I help you?</p>

<p><strong>Me:</strong> I don&rsquo;t have internet connection.</p>

<p><strong>Tech support guy:</strong> All right, let me check […]</p>

<p><strong>Tech support guy:</strong> Sir, are you nearby the router?</p>

<p><strong>Me:</strong> Yes&hellip; &ndash;_&ndash;</p></blockquote>

<p>Here I was expecting to hear the <a href="http://www.youtube.com/watch?feature=player_detailpage&amp;v=nn2FB1P_Mn8#t=10">“Have you tried to turn off and on again?”</a> and ping routine, and ready to tell him to just skip it, but that&rsquo;s not what happened:</p>

<blockquote><p><strong>Tech support guy:</strong> Could you get a pointy object and use it to press the <em>reset button</em> located in the back of the router?</p></blockquote>

<p>This is when I instantly thought about the possibility of having a infrastructure change of my internet connection</p>

<p>After reseting the router, that was it, the IPoATM was gone, and the ISP pre flashed (not the factory default)
PPPoE configuration was loaded. Dynamic public IP address check; externally reachable port forwarding check! Yeah! :)</p>

<blockquote><p><strong>Me:</strong> Oh, it did work! Thanks :)</p></blockquote>

<p>Having direct internet connection, I decided to use my WRT54GL router as my main DSL and network manager and use my ISP provided DSL router as a bridge. But right after selection the connection configuration on the DSL router’s web GUI, the bridge option wasn’t there, and actually the ISP PPPoE’s connection configuration was the only option. So far I was more than annoyed by my ISP’s restrictions, since I’ve been facing one after another. Searching on the web, I found out that <a href="http://www.boards.ie/vbulletin/showthread.php?p=63841326#post63841326">people that were facing the same problem solved it by upgrading their firmware to a newer generic version</a>. I used the firmware linked in <a href="http://www.boards.ie/vbulletin/showthread.php?p=63841326#post63841326">that post</a>, but instead of setting up a TFTP and BOOTP server as indicated, I downloaded and used the official setup wizard (for Windows only) <a href="http://download.modem-help.co.uk/mfcs-A/Alcatel/Modems/TG585/v7/Wizards/Setup/Windows/EN/">here</a>.</p>

<p>With the new flashed generic firmware, everything went smoothly: I setup the DSL router to bridge mode, configured my WRT54GL <a href="http://www.polarcloud.com/tomato">Tomato’s firmware</a> to PPPoE mode, entering the connections user and password (my ISP, as you guessed doesn’t provide those, but it could be easily found out by using a <a href="http://stackoverflow.com/questions/1383142/show-password-as-text-control">password field shower script</a> before flashing the router), and done! :)</p>

<p>All I did after was setup a <a href="http://www.noip.com">dynamic DNS account</a> and use it on Tomato’s client to automatically update a subdomain to the current non-static IP address.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">David Hsieh</span></span>

      








  


<time datetime="2013-12-20T23:05:52-06:00" pubdate data-updated="true">Dec 20<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/networks/'>networks</a>, <a class='category' href='/blog/categories/notes/'>notes</a>, <a class='category' href='/blog/categories/sysadmin/'>sysadmin</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://davidhsiehlo.com/blog/2013/12/20/finally/" data-via="Deivuh" data-counturl="http://davidhsiehlo.com/blog/2013/12/20/finally/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/12/15/bypassing-a-nat-slash-firewall-by-reverse-ssh-tunneling/" title="Previous Post: Bypassing a NAT/Firewall by reverse SSH Tunneling">&laquo; Bypassing a NAT/Firewall by reverse SSH Tunneling</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/01/29/why-using-google-dns-wasnt-great-idea/" title="Next Post: Why using Google DNS wasn't a great idea">Why using Google DNS wasn't a great idea &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/27/digitalocean-droplets-manager-OSX/">DigitalOcean Droplets Manager for OSX</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/25/dagr-a-time-of-the-day-based-led-lighting-system/">Dagr: A Time of the Day Based LED Lighting System</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/15/mkv-srt-extractor-for-samsung-plex-users/">MKV SRT Extractor for Samsung Plex users</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/29/why-using-google-dns-wasnt-great-idea/">Why using Google DNS wasn't a great idea</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/20/finally/">Finally, no more double NAT from my ISP</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/Deivuh">@Deivuh</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'Deivuh',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/+DavidHsiehLo?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - David Hsieh -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> <!--| Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>-->
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'davidhsiehlo';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://davidhsiehlo.com/blog/2013/12/20/finally/';
        var disqus_url = 'http://davidhsiehlo.com/blog/2013/12/20/finally/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
